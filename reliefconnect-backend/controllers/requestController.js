import Request from '../models/requestModel.js'; export const createRequest = async (req,res)=>{ try{ const body = req.body; if(req.user && req.user.id) body.userId = req.user.id; const r = await Request.create(body); try{ global.io && global.io.emit('new-request', r); }catch(e){} res.status(201).json(r); }catch(e){ res.status(500).json({message:e.message}); } }; export const getAllRequests = async (req,res)=>{ try{ const list = await Request.find().sort({createdAt:-1}); res.json(list); }catch(e){ res.status(500).json({message:e.message}); } };